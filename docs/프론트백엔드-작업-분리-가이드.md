# 프론트엔드/백엔드 작업 분리 가이드

**프로젝트:** 1인 셀러 라이브 커머스 MVP 플랫폼
**작성일:** 2026-01-25
**목적:** 다중 세션에서 프론트엔드/백엔드 동시 작업 시 충돌 방지

---

## 1. 프로젝트 구조 개요

### 현재 상태
```
dorami/
├── _bmad/                  # BMAD 워크플로우 (건드리지 않음)
├── _bmad-output/           # 기획 문서 (PRD, Architecture)
├── docs/                   # 프로젝트 문서
├── ui frame/               # UI 디자인 스크린샷
└── [소스 코드 미생성]
```

### 목표 구조 (제안)

```
dorami/
├── frontend/               # 🎨 프론트엔드 전용 영역
│   ├── mobile/            # React Native 모바일 앱
│   │   ├── src/
│   │   │   ├── components/
│   │   │   ├── screens/
│   │   │   ├── navigation/
│   │   │   ├── services/  # API 호출 로직
│   │   │   ├── hooks/
│   │   │   └── utils/
│   │   ├── package.json
│   │   └── ...
│   └── admin/             # React/Vue 웹 관리자
│       ├── src/
│       │   ├── components/
│       │   ├── pages/
│       │   ├── api/       # API 호출 로직
│       │   └── utils/
│       ├── package.json
│       └── ...
│
├── backend/                # 🔧 백엔드 전용 영역
│   ├── api/               # REST API 서버
│   │   ├── controllers/
│   │   ├── routes/
│   │   ├── middlewares/
│   │   └── models/
│   ├── websocket/         # WebSocket 서버
│   │   ├── handlers/
│   │   └── rooms/
│   ├── streaming/         # 라이브 스트리밍 (OBS 연동)
│   │   └── rtmp-server/
│   ├── database/          # DB 스키마/마이그레이션
│   │   ├── migrations/
│   │   └── seeds/
│   ├── services/          # 비즈니스 로직
│   │   ├── order.service.js
│   │   ├── inventory.service.js
│   │   ├── notification.service.js
│   │   └── ...
│   ├── config/            # 서버 설정
│   └── package.json       # 또는 requirements.txt (Python)
│
├── shared/                 # 🤝 공유 코드 (타입, 상수, 유틸)
│   ├── types/             # TypeScript 타입 정의
│   ├── constants/         # 상수 (상태 코드, 메시지)
│   └── validation/        # 유효성 검사 스키마
│
├── infrastructure/         # 🏗️ 인프라 (DevOps)
│   ├── docker/
│   ├── k8s/
│   └── terraform/
│
├── docs/                   # 📚 문서
├── _bmad/                  # BMAD 워크플로우
├── _bmad-output/           # 기획 산출물
└── ui frame/               # UI 디자인
```

---

## 2. 작업 영역 분리 규칙

### ✅ 프론트엔드 세션 작업 범위

**안전하게 작업 가능한 파일/폴더:**
- `frontend/mobile/**/*` (모바일 앱 전체)
- `frontend/admin/**/*` (웹 관리자 전체)
- `shared/types/**/*` (타입 정의 - 프론트엔드가 주도적으로 정의)

**절대 건드리지 말 것:**
- `backend/**/*` (백엔드 코드)
- `infrastructure/**/*` (인프라 설정)

**조심해서 작업 (충돌 가능성):**
- `shared/constants/**/*` - 상수 추가/수정 시 백엔드와 협의
- `package.json` (루트) - 의존성 추가 시 백엔드와 조율

---

### ✅ 백엔드 세션 작업 범위

**안전하게 작업 가능한 파일/폴더:**
- `backend/api/**/*` (REST API 서버)
- `backend/websocket/**/*` (WebSocket 서버)
- `backend/streaming/**/*` (스트리밍 서버)
- `backend/database/**/*` (DB 스키마, 마이그레이션)
- `backend/services/**/*` (비즈니스 로직)
- `backend/config/**/*` (서버 설정)
- `infrastructure/**/*` (Docker, K8s, Terraform)

**절대 건드리지 말 것:**
- `frontend/**/*` (프론트엔드 코드)

**조심해서 작업 (충돌 가능성):**
- `shared/types/**/*` - 읽기 전용 (프론트가 정의한 타입 참조만 가능)
- `shared/constants/**/*` - 상수 추가/수정 시 프론트와 조율

---

## 3. 공유 파일 협업 전략

### 📄 `shared/types/` (TypeScript 타입 정의)

**협업 방법:**
1. **프론트엔드 우선 원칙 (UI-First Development):** 프론트엔드가 UI/UX 작업하면서 필요한 데이터 타입을 먼저 정의
2. **백엔드 구현:** 백엔드는 프론트가 정의한 타입에 맞춰 API 응답 구조 구현
3. **Git 브랜치 분리:**
   - 프론트: `frontend/feature-xxx` (타입 정의)
   - 백엔드: `backend/feature-yyy` (타입에 맞춰 구현)

**예시 파일:**
```typescript
// shared/types/product.types.ts
// 프론트엔드가 먼저 정의
export interface Product {
  id: string;
  name: string;
  price: number;
  stock: number;
  imageUrl: string;
  // UI에 필요한 모든 필드 정의
}
```

**규칙:**
- 프론트엔드가 UI 구현하면서 필요한 데이터 구조를 `shared/types/`에 정의
- 백엔드는 해당 타입에 맞춰 API 응답 구조를 구현
- 타입 수정 필요 시 두 세션 간 커뮤니케이션 필수
- 백엔드는 타입 파일을 읽기 전용(read-only)으로 참조

---

### 📄 `shared/constants/` (상수 정의)

**협업 방법:**
1. **네이밍 컨벤션 통일:**
   ```javascript
   // shared/constants/orderStatus.js
   export const ORDER_STATUS = {
     PENDING_PAYMENT: 'pending_payment',
     PAYMENT_CONFIRMED: 'payment_confirmed',
     SHIPPED: 'shipped',
   };
   ```
2. **추가만 하고, 삭제/수정 금지** (기존 코드 깨질 수 있음)
3. **변경 필요 시 두 세션 간 합의 후 진행**

---

## 4. Git 브랜치 전략 (권장)

### 브랜치 네이밍 규칙

```
main                          # 메인 브랜치 (배포용)
├── frontend/setup            # 프론트엔드 초기 설정
├── frontend/mobile-ui        # 모바일 UI 구현
├── frontend/admin-dashboard  # 관리자 대시보드
├── backend/api-setup         # 백엔드 API 서버 구축
├── backend/websocket         # WebSocket 서버 구현
└── backend/db-schema         # DB 스키마 설계
```

### 작업 흐름

**프론트엔드 세션:**
```bash
# 1. 프론트엔드 브랜치 생성
git checkout -b frontend/mobile-ui

# 2. 작업 진행 (frontend/ 폴더만)
# ... 코드 작성 ...

# 3. 커밋 (자주!)
git add frontend/
git commit -m "feat(mobile): Add product list screen"

# 4. 푸시
git push origin frontend/mobile-ui
```

**백엔드 세션:**
```bash
# 1. 백엔드 브랜치 생성
git checkout -b backend/api-setup

# 2. 작업 진행 (backend/ 폴더만)
# ... 코드 작성 ...

# 3. 커밋 (자주!)
git add backend/
git commit -m "feat(api): Add product listing endpoint"

# 4. 푸시
git push origin backend/api-setup
```

### Merge 전략

1. **각 세션에서 작업 완료 후:**
   - 각자 브랜치를 `main`으로 PR 생성
   - 코드 리뷰 후 머지

2. **충돌 발생 시:**
   - `shared/` 폴더에서만 발생 가능
   - 두 세션 담당자가 함께 해결

---

## 5. 동시 작업 시나리오 예시

### 시나리오 1: 상품 목록 API 개발

**Step 1: 프론트엔드 세션 - 타입 정의**
```typescript
// shared/types/product.types.ts
// 프론트엔드가 먼저 UI에 필요한 데이터 구조 정의
export interface Product {
  id: string;
  name: string;
  price: number;
  stock: number;
  imageUrl: string;
}
```

**Step 2: 프론트엔드 세션 - UI 구현**
```javascript
// frontend/mobile/src/screens/ProductListScreen.jsx
import { Product } from '@shared/types';

// Mock 데이터로 UI 먼저 구현
const mockProducts: Product[] = [
  { id: '1', name: '상품A', price: 10000, stock: 5, imageUrl: '...' },
];
```

**Step 3: 백엔드 세션 - 프론트 타입에 맞춰 API 구현**
```javascript
// backend/api/routes/products.js
import { Product } from '@shared/types';

router.get('/api/products', async (req, res) => {
  const products = await Product.findAll();
  // 프론트가 정의한 타입에 맞춰 응답 구조 구현
  res.json({ success: true, data: products });
});
```

**통합:**
- 백엔드 API 완성 → 프론트엔드에 엔드포인트 URL 공유
- 프론트엔드는 Mock 데이터 제거하고 실제 API 호출로 교체

---

### 시나리오 2: WebSocket 채팅 기능

**프론트엔드 세션:**
```javascript
// frontend/mobile/src/services/websocket.js
// WebSocket 클라이언트 구현
const ws = new WebSocket('ws://localhost:8080/chat');
ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  // UI 업데이트
};
```

**백엔드 세션 (현재):**
```javascript
// backend/websocket/handlers/chat.js
// WebSocket 서버 구현
wss.on('connection', (ws) => {
  ws.on('message', (data) => {
    // 모든 클라이언트에게 브로드캐스트
    wss.clients.forEach(client => {
      client.send(data);
    });
  });
});
```

**통합:**
- 백엔드 WebSocket 서버 실행
- 프론트엔드는 로컬 테스트로 연결 확인

---

## 6. 커밋 메시지 규칙

### 형식
```
<type>(<scope>): <subject>

예시:
feat(api): Add product listing endpoint
fix(websocket): Fix chat message broadcast issue
feat(mobile): Implement cart timer UI
```

### Type
- `feat`: 새 기능
- `fix`: 버그 수정
- `refactor`: 코드 리팩토링
- `docs`: 문서 수정
- `test`: 테스트 코드
- `chore`: 빌드/설정 변경

### Scope (중요!)
- **프론트엔드:** `mobile`, `admin`, `ui`
- **백엔드:** `api`, `websocket`, `streaming`, `db`, `service`
- **공유:** `shared`, `types`, `constants`

**이렇게 하면 Git 로그만 봐도 어느 영역인지 즉시 파악 가능!**

---

## 7. 백엔드 우선 개발 추천 태스크

BMad Master가 백엔드 세션에서 먼저 진행하면 좋을 작업들:

### Phase 1: 기반 인프라 구축
1. **프로젝트 구조 생성**
   ```bash
   mkdir -p backend/{api,websocket,streaming,database,services,config}
   ```

2. **데이터베이스 스키마 설계**
   - Users, Products, Orders, CartItems, Reservations 테이블
   - ER 다이어그램 작성
   - 마이그레이션 파일 생성

3. **REST API 서버 초기 설정**
   - Express.js 또는 NestJS 설정
   - CORS, Body Parser, Error Handler 미들웨어
   - Health Check 엔드포인트 (`GET /health`)

### Phase 2: 핵심 API 개발
4. **사용자 인증 API**
   - `POST /api/auth/kakao` (카카오 소셜 로그인)
   - JWT 토큰 발급

5. **상품 관리 API**
   - `GET /api/products` (상품 목록)
   - `POST /api/products` (관리자: 상품 등록)
   - `GET /api/products/:id` (상품 상세)

6. **주문 관리 API**
   - `POST /api/orders` (주문 생성)
   - `GET /api/orders` (내 주문 목록)
   - `PATCH /api/orders/:id/status` (관리자: 주문 상태 변경)

### Phase 3: 실시간 기능
7. **WebSocket 서버 구현**
   - 채팅 메시지 브로드캐스트
   - 상품 등록 알림
   - 예비번호 승급 알림

8. **장바구니 타이머 로직**
   - Redis 기반 타이머 구현
   - 만료 시 자동 취소 + 예비번호 승급

---

## 8. 백엔드 워크플로우 추천

BMad Master는 다음 워크플로우를 활용할 수 있습니다:

### 옵션 1: `/bmad:bmm:workflows:create-architecture`
- 이미 완료됨 (architecture.md 존재)

### 옵션 2: `/bmad:bmm:workflows:create-tech-spec`
- **추천!** API 엔드포인트 상세 스펙 작성
- 각 API의 Request/Response 명세
- 데이터베이스 스키마 정의

### 옵션 3: `/bmad:bmm:workflows:quick-dev`
- **추천!** 빠른 개발 워크플로우
- 직접 코드 생성 및 구현

### 옵션 4: `/bmad:bmm:workflows:dev-story`
- User Story 기반 개발 (Epic이 있다면)

---

## 9. 실시간 동기화 전략

### 프론트엔드 ↔ 백엔드 커뮤니케이션

**방법 1: Slack/Discord 채널 활용**
```
📢 [Frontend] Product 타입 정의 완료!
   - 파일: shared/types/product.types.ts
   - 백엔드는 이 타입에 맞춰 API 응답 구현해주세요

📢 [Backend] 상품 목록 API 완성!
   - Endpoint: GET /api/products
   - Response: Product[] (shared/types 준수)
   - 테스트: http://localhost:3000/api/products
```

**방법 2: Git Commit 메시지로 소통**
```bash
# 프론트엔드 커밋 메시지
feat(types): Add Product type definition - Backend please implement API

# 백엔드 커밋 메시지
feat(api): Implement product listing endpoint per Product type - Ready for integration
```

**방법 3: shared/ 폴더의 README 활용**
```markdown
# shared/types/README.md

## 최근 업데이트
- 2026-01-25: Product 타입 추가 (프론트엔드)
  - 백엔드는 `GET /api/products` 응답을 이 타입에 맞춰 구현
  - 프론트엔드는 `import { Product } from '@shared/types'` 사용
```

---

## 10. 충돌 방지 체크리스트

### 작업 시작 전
- [ ] 내 세션의 작업 영역 확인 (frontend/ 또는 backend/)
- [ ] Git 브랜치 생성 (`frontend/*` 또는 `backend/*`)
- [ ] 다른 세션과 작업 범위 공유

### 작업 중
- [ ] 내 영역의 파일만 수정
- [ ] `shared/` 폴더 수정 시 다른 세션에 알림
- [ ] 자주 커밋 (작은 단위로)

### 작업 완료 후
- [ ] 커밋 메시지에 scope 명시 (`feat(api)`, `feat(mobile)`)
- [ ] PR 생성 전 `main` 브랜치에서 최신 코드 pull
- [ ] 충돌 발생 시 공유 폴더만 조심히 해결

---

## 11. FAQ

**Q1: 두 세션에서 동시에 같은 파일을 수정하면?**
- Git이 자동 머지 시도 → 실패 시 충돌(conflict) 발생
- 해결: 공유 파일은 사전에 조율, 또는 브랜치로 분리

**Q2: 프론트엔드가 백엔드 API를 기다려야 하나?**
- 아니요! Mock 데이터로 먼저 UI 구현 가능
- 백엔드 API 완성 후 실제 데이터로 교체

**Q3: `shared/types/` 파일을 누가 만드나?**
- **프론트엔드 우선 (UI-First):** 프론트엔드가 UI 작업하면서 필요한 데이터 타입을 먼저 정의
- 백엔드는 프론트가 정의한 타입에 맞춰 API 응답을 구현
- 이유: UI/UX 중심 개발로 사용자 경험을 우선시

**Q4: 데이터베이스 스키마 변경 시 프론트에 영향?**
- 직접 영향 없음 (백엔드 내부 변경)
- 단, API 응답 구조 변경 시 `shared/types/` 업데이트 필요

---

## 12. 요약

| 구분 | 프론트엔드 세션 | 백엔드 세션 (현재) |
|------|-----------------|-------------------|
| **작업 폴더** | `frontend/` | `backend/`, `infrastructure/` |
| **Git 브랜치** | `frontend/*` | `backend/*` |
| **공유 파일** | `shared/types/` (정의) | `shared/types/` (읽기 전용) |
| **커밋 Scope** | `mobile`, `admin`, `ui`, `types` | `api`, `websocket`, `db`, `service` |
| **우선 작업** | UI/UX 구현 + 타입 정의 | 프론트 타입에 맞춰 API 구현 |

---

**BMad Master의 조언:**
- 각 세션은 자기 영역에만 집중하면 충돌 없이 안전하게 작업 가능
- **프론트엔드 우선 (UI-First):** 프론트가 타입 정의 → 백엔드가 구현
- `shared/types/`는 프론트가 정의, 백엔드는 읽기 전용으로 참조
- Git 브랜치를 활용하여 각자의 작업을 독립적으로 진행
- 백엔드는 프론트가 정의한 타입에 맞춰 API 응답 구조를 구현

**다음 단계:** 백엔드 워크플로우를 선택하여 개발 시작! 🚀
